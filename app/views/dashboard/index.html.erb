<div class="container-fluid" style="height:100%">
  <div class="row" >
      <div class="col-md-6"style="border:1px solid gray;border-radius:10px;margin: 1vw 1vw 1vw 3vw;background-image: url('https://i.imgur.com/1pLGxMy.png')">
        <div class="row">
          <h5 style='margin:1vw 0vw 0vw 1vw';>Past 24 Hours</h5>
        </div>
        <div class="row">
        <div class="col-md-3" style="border-right:1px solid lightgray">
          <h4 class="text-center">45</h4>
          <h5 class='text-center' style='color:gray'>Jobs Running</h5>
        </div>
        <div class="col-md-3" style="border-right:1px solid lightgray">
          <h4 class="text-center">2</h4>
          <h5 class='text-center' style='color:gray'>Successful Runs</h5>
        </div>
        <div class="col-md-3" style="border-right:1px solid lightgray">
          <h4 class="text-center">25</h4>
          <h5 class='text-center' style='color:gray'>Violations</h5>
        </div>
        <div class="col-md-3">
          <h4 class="text-center">4</h4>
          <h5 class='text-center' style='color:gray'>Errors</h5>
        </div>
      </div>
      <div class="row">
        <h5 style="height:2vw"></h5>
      </div>
    </div>
    <div class="col-md-3">
    </div>
  </div>
  <div class="row">
    <div class ="col-md-5" style="border:1px solid gray;border-radius:10px;margin:1vw 1vw 1vw 3vw;background-image: url('https://i.imgur.com/1pLGxMy.png')">
      <div class="row">
        <div class="col-md-7">
          <div id="pieChart">
          </div>
          <label>Turn On Live Feed <input type = "checkbox" id="check_pie"></input></label>
        </div>
        <div class="col-md-5" style='margin-top:5vh'>
          <ul style="list-style: none;">
            <%@dashboard.each do |d|%>
            <li><span class="glyphicon glyphicon-th-large" style="color:<%=d.color%>"></span> <%=d.label%> : <%=d.value%></li><br>
            <%end%>
          </ul>
        </div>
      </div>
    </div>

    <div class ="col-md-6" style="border:1px solid gray;border-radius:10px;margin:1vw;background-image: url('https://i.imgur.com/1pLGxMy.png')">
      <h4 class="text-center">Live Weather Report</h4>
      <div class="row">
        <div class="col-md-9">
          <div id="chart" style="height:39.5vh"></div>
        </div>
        <div class="col-md-3">
          <button style="margin-bottom:1vw"class='btn-lg btn-success' id="fremont">Fremont</button>
          <button style="margin-bottom:1vw"class='btn-lg btn-success' id="chicago">Chicago</button>
          <button style="margin-bottom:1vw"class='btn-lg btn-success' id="texas">Texas</button>
        </div>
      </div>
    </div>
  </div>


</div>


<script>
var chart = c3.generate({
      bindto: '#chart',
    data: {
      columns: [
        ['Fremont Day Temp', '<%=@day[1]%>', '<%=@day[2]%>', '<%=@day[3]%>', '<%=@day[4]%>', '<%=@day[5]%>', '<%=@day[6]%>','<%=@day[7]%>'],
        ['Fremont Night Temp', '<%=@night[1]%>', '<%=@night[2]%>', '<%=@night[3]%>', '<%=@night[4]%>', '<%=@night[5]%>', '<%=@night[6]%>','<%=@night[7]%>']
      ]
    },
    axis: {
      y: {
        label: {
          text: 'Temperature ',
          position: 'outer-middle'
        }
      },
      x: {
        show: true,
        label: {
          text: 'Days in Future',
          position: 'outer-middle'
        }
      }
    }
});
  $('#chicago').on('click',function(){
    chart.load({
      columns: [
        ['Chicago Day Temp', '<%=@c_day[1]%>', '<%=@c_day[2]%>', '<%=@c_day[3]%>', '<%=@c_day[4]%>', '<%=@c_day[5]%>', '<%=@c_day[6]%>','<%=@c_day[7]%>'],
        ['Chicago Night Temp', '<%=@c_night[1]%>', '<%=@c_night[2]%>', '<%=@c_night[3]%>', '<%=@c_night[4]%>', '<%=@c_night[5]%>', '<%=@c_night[6]%>','<%=@c_night[7]%>']
      ]
    });
    chart.unload({
      ids: ['Fremont Day Temp', 'Fremont Night Temp','Texas Day Temp','Texas Night Temp']
    });
  })
  $('#fremont').on('click',function(){
    chart.load({
      columns: [
        ['Fremont Day Temp', '<%=@day[1]%>', '<%=@day[2]%>', '<%=@day[3]%>', '<%=@day[4]%>', '<%=@day[5]%>', '<%=@day[6]%>','<%=@day[7]%>'],
        ['Fremont Night Temp', '<%=@night[1]%>', '<%=@night[2]%>', '<%=@night[3]%>', '<%=@night[4]%>', '<%=@night[5]%>', '<%=@night[6]%>','<%=@night[7]%>']
      ]
    });
    chart.unload({
      ids: ['Chicago Day Temp', 'Chicago Night Temp','Texas Day Temp','Texas Night Temp']
    });
  })
  $('#texas').on('click',function(){
    chart.load({
      columns: [
        ['Texas Day Temp', '<%=@t_day[1]%>', '<%=@t_day[2]%>', '<%=@t_day[3]%>', '<%=@t_day[4]%>', '<%=@t_day[5]%>', '<%=@t_day[6]%>','<%=@t_day[7]%>'],
        ['Texas Night Temp', '<%=@t_night[1]%>', '<%=@t_night[2]%>', '<%=@t_night[3]%>', '<%=@t_night[4]%>', '<%=@t_night[5]%>', '<%=@t_night[6]%>','<%=@t_night[7]%>']
      ]
    });
    chart.unload({
      ids: ['Chicago Day Temp', 'Chicago Night Temp','Fremont Day Temp','Fremont Night Temp']
    });
  })


var pie = new d3pie("pieChart", {
	"header": {
		"title": {
			"text": "Projects",
			"fontSize": 20,
			"font": "courier"
		},
		"subtitle": {
			"text": "Current Status",
			"color": "#999999",
			"fontSize": 10,
			"font": "courier"
		},
		"location": "pie-center",
		"titleSubtitlePadding": 10
	},
	"footer": {
		"text": "* One of the sections changes value in the database, and is displayed in the graph",
		"color": "#999999",
		"fontSize": 12,
		"font": "open sans",
		"location": "bottom-left"
	},
	"size": {
		"canvasWidth": 300,
		"canvasHeight": 300,
		"pieInnerRadius": "84%",
		"pieOuterRadius": "75%"
	},
	"data": {
		"sortOrder": "label-desc",
		"smallSegmentGrouping": {
			"enabled": true,
			"valueType": "value",
			"color": "#cab4b4"
		},
		"content": [
			{
				"label": '<%= @dashboard[0].label%>',
				"value": parseInt('<%= @dashboard[0].value%>'),
				"color": '<%= @dashboard[0].color%>',
			},
      {
        "label": '<%= @dashboard[1].label%>',
        "value": parseInt('<%= @dashboard[1].value%>'),
        "color": '<%= @dashboard[1].color%>',
      },
      {
        "label": '<%= @dashboard[2].label%>',
        "value": parseInt('<%= @dashboard[2].value%>'),
        "color": '<%= @dashboard[2].color%>',
      },
      {
        "label": '<%= @dashboard[3].label%>',
        "value": parseInt('<%= @dashboard[3].value%>'),
        "color": '<%= @dashboard[3].color%>',
      },
      {
        "label": '<%= @dashboard[4].label%>',
        "value": parseInt('<%= @dashboard[4].value%>'),
        "color": '<%= @dashboard[4].color%>',
      },
      {
        "label": '<%= @dashboard[5].label%>',
        "value": parseInt('<%= @dashboard[5].value%>'),
        "color": '<%= @dashboard[5].color%>',
      },
		]
	},
  "labels": {
  		"outer": {
  			"pieDistance": 12
  		},
  		"inner": {
  			"format": "none",
  		},
  		"mainLabel": {
  			"fontSize": 12
  		},
  		"percentage": {
  			"color": "#999999",
  			"fontSize": 11,
  			"decimalPlaces": 0
  		},
  		"value": {
  			"color": "#cccc43",
  			"fontSize": 0
  		},
  		"lines": {
  			"enabled": true,
  			"color": "#777777"
  		},
  		"truncation": {
  			"enabled": true
  		}
  	},
	"tooltips": {
		"enabled": true,
		"type": "placeholder",
		"string": "{label}: {percentage}%",
		"styles": {
			"fontSize": 15
		}
	},
	"effects": {
		"pullOutSegmentOnClick": {
			"effect": "linear",
			"speed": 400,
			"size": 8
		}
	},
	"misc": {
		"colors": {
			"segmentStroke": "#000000",
		}
	},
	"callbacks": {}
});

</script>
